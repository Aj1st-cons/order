<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Orders Made Easy with Order App – Your Nearest Stores in just One Tap</title>
    <!-- Meta Description -->
    <meta name="description" content="Order App makes shopping easy by connecting you with nearby stores within 1 KM. Order groceries, clothes, food, accessories, laundry, and more—all with just one tap!">
    <!-- Open Graph Meta Tags for Facebook and Instagram -->
    <meta property="og:title" content="Orders Made Easy with Order App – Your Nearest Stores in just One Tap">
    <meta property="og:description" content="Order App makes shopping easy by connecting you with nearby stores within 1 KM. Order groceries, clothes, food, accessories, laundry, and more—all with just one tap!">
    <meta property="og:url" content="https://order-1ib.pages.dev">
    <meta property="og:image" content="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000075498.webp?v=1738901678">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Order App">
    <meta property="og:locale" content="en_US">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- xxxxxxxxxxxxxxxxxxxxxx -->
<style>
    body { 
             font-family: Arial, sans-serif; 
             margin: 20px; 
             text-align: center; 
         }
         .header {
             background-color: #eeeeee; 
             text-align: center; 
             padding: 10px 0; 
             position: fixed; 
             top: 0; 
             left: 0; 
             width: 100%; 
             height: 40px;
             z-index: 20; 
             display: flex; 
             flex-direction: row;               
             justify-content: center; 
             white-space: nowrap; 
             gap: 10px;
             align-items: center;     
        } 
        .header h1 { 
             position: absolute;
             top: 10px;
             left: 20px;
             color: #009500;              
             font-weight: bold; 
             text-shadow: 3px 3px 3px #000; 
             font-size: 30px; 
             margin: 0; 
             margin-bottom: 0px;
             text-decoration: none; 
             font-family: 'Lilita One', cursive;
        }
        .location { 
             cursor: pointer; 
             font-size: 16px; 
        }
        .icon-container {
             position: absolute;
             right: 10px; 
             display: flex;
             align-items: center;
             margin-right: 10px; 
             cursor: pointer;
        }
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border: 1px solid black;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
            display: none;            
            overflow-y: auto;
        }
       #itemPopup {
            position: fixed; 
            width: 100%; 
            height: calc(100% - 60px); 
            background-color: #ffffff; 
            display: none; 
            overflow-y: auto; 
            overflow-x: hidden; 
            z-index: 10; 
            padding-bottom: 70px; 
            box-sizing: border-box;             
        }
         #errorPopup {
            position: fixed;
            display: none;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 250px;
            background-color: white;
            border: 2px solid #009500;
            border-radius: 5px;
            box-shadow: 0 0 30px 30px rgba(0, 0, 0, 0.3);
            z-index: 9999; 
            padding: 10px; 
            box-sizing: border-box; 
         }
        #locationPopup, #cityPopup, #locationErrorPopup {
            position: fixed;
            top: 60px;
            right: 10px;
            width: 170px;
            height: 400px;
            background-color: #ffffff;
            display: none;
            overflow: auto; 
            z-index: 10;
            box-sizing: border-box;
            border: 2px solid #009500;
 
            display: none;
            flex-direction: column;
        }
        #locationPopup,#cityPopup {
            box-shadow: -5px 5px 15px 5px rgba(0, 0, 0, 0.8);
        }
        .popup-content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 10px;
            max-height: calc(100% - 40px); 
        }
        #locationsList, #cityList {
            margin-top: 0px;
            text-align: left;
            margin-left: 10px; 
            color: #52595d; 
            font-weight: bold;
            overflow-y: auto; 
        } 
        .current-location {
            text-align: left;
            margin-bottom: 20px;
            margin-top: 15px;            
            color: #009500;
            cursor: pointer;
            font-weight: bold;
        }
        .current-location:hover {
            color: darkred;
        }               
        .popup-footer {
            position: sticky;
            top: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px;
            border-bottom: 1px solid #009500;
            background-color: #ffffff;
            z-index: 11; 
        }
        .popup-footer button {
            font-size: 18px; 
            background: none;
            border: none;
            cursor: pointer;
        }
        .popup-footer .back-btn {
            color: #7D0541;
        }
        .popup-footer button:last-child {
            color: #7D0541;
        }
        #locationsPopup h4 {
            text-align: center;
            color: red;
        }
        .header .replaceable-text {
            position: absolute;
            top: 20px;
            right: 30px;
            cursor: pointer;
            background: #fff;
            padding: 0px 5px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 12px;         
        }
        .current-location, .replaceable-text {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        .bottom-popup {
            position: fixed;
            top: 150px;
            left: 50%;         
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: none;
            z-index: 9999 !important;
        }
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background-color: black;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px 0;
            z-index: 1000;
        }
        .footer-btn {
            color: white;
            font-size: 24px;
            text-decoration: none;
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .footer-btn i {
            font-size: 28px;
        }
        .footer-btn img {
            margin-top: -30px;
        }
        html, body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        #categorie {            
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 20px; 
            width: 100vw;              
            height: auto;  
            margin: 0 auto;                 
            padding: 20px;             
            box-sizing: border-box;    
            background-color: #fff;
            margin-top: 50px;
            margin-bottom: 50px;
        }
        .cardx { 
            margin-top: 0px;              
            background: linear-gradient(to top right, #eeeeee, #fff);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            text-align: center;
            padding: 5px;            
            cursor: pointer;
            width: 100px;
            height: 115px;
            transition: transform 0.2s;            
        }
        .cardx:last-child {
            margin-bottom: 20px;
        }
        .cardx:hover {
            transform: scale(1.05);    
        }
        .cardx img {
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 8px;
        }
        .cardx p {
            margin-top: 1px;
            line-height: 0.8;
            color: #52595d;
            font-weight: bold;
            font-size: 13px;
            white-space: nowrap;
        }
        .item-grid {            
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            justify-content: center; 
            gap: 20px; 
            width: calc(100% - 120px); 
            margin: 0 auto; 
            margin-top: 10px; 
            padding: 10px; 
            box-sizing: border-box;
        }                   
        .item-card {
            margin-top: 0px;              
            background: linear-gradient(to top right, #eeeeee, #fff);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            text-align: center;
            padding: 5px;            
            cursor: pointer;
            width: 100px;
            height: 115px;
            transition: transform 0.2s;
        }
        .item-card:hover {
            transform: scale(1.05);
        }
        .item-card img {
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 8px;
        }
        .item-card p {
            margin-top: 1px;
            line-height: 0.8;
            color: #52595d;
            font-size: 13px;
            white-space: nowrap;
            font-weight: bold;
        }  
        #welcome {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #fff;
            color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
            text-align: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0s linear 0.5s;
        }
        #welcome.visible {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease-in-out, visibility 0s linear 0s;
        }
        #welcome img {
            max-width: 400px;
            margin-bottom: 100px;
            margin-top: -30px;
            margin-left: 0px;
            animation: fade-in 0.5s ease-in-out forwards;
        }
        h1 {
            display: flex;
            gap: 1px;
            font-family: 'Lilita One', cursive;
            font-size: 50px;
            color: #009500;
            margin-top: -5px;
            text-shadow: 5px 5px 5px black;
        }
        h1 span {
            opacity: 0;
            transform: scale(0.8);
            animation: letter-emerge 0.3s ease-in-out forwards;
        }
        h1 span.space {
            width: 10px;
        }
    h1 span:nth-child(1) { animation-delay: 0.5s; }
    h1 span:nth-child(2) { animation-delay: 0.55s; }
    h1 span:nth-child(3) { animation-delay: 0.6s; }
    h1 span:nth-child(4) { animation-delay: 0.65s; }
    h1 span:nth-child(5) { animation-delay: 0.7s; }
    h1 span:nth-child(6) { animation-delay: 0.75s; }
    h1 span:nth-child(7) { animation-delay: 0.8s; }
    h1 span:nth-child(8) { animation-delay: 0.85s; }
    h1 span:nth-child(9) { animation-delay: 0.9s; }
    h1 span:nth-child(10) { animation-delay: 0.95s; }
    @keyframes fade-in {
        0% {
            opacity: 0;
            transform: scale(0.8);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
        }
        #welcome {
            transition: opacity 1s ease-out;
        }
        #welcome.hidden {
            opacity: 0;
            pointer-events: none;
        }
            @keyframes letter-emerge {
        0% {
            opacity: 0;
            transform: scale(0.8);
        }
        100% {
            opacity: 1;
            transform: scale(1);
             }
        }    
#editPopup {
    background: #f9f9f9;
    border-radius: 10px;
    text-align: center;
}
#editPopup h3 {
    margin: 0 0 10px 0;
}
#editPopup button {
    margin: 5px;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
#editPopup button:hover {
    background: #ddd;
}    
#saveLocationPopup, #editPopup {
    display: none;
    position: fixed;
    top: 40%; 
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 20px;
    border: 2px solid #009500;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.7); 
    z-index: 1000;
    width: 300px; 
}
.input-container {
    display: flex;
    justify-content: center;
}
#saveLocationInput, #editNameInput {
    width: 100%;
    padding: 8px;
}
.popup-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
}
#cancelButton, #saveLocationConfirm, #editNoButton, #editYesButton {
    border: none;
    padding: 8px 16px;
    cursor: pointer;
    font-weight: bold;
}
#cancelButton, #editNoButton {
    background-color: #73A16C;
    color: white;
}
#cancelButton:hover, #editNoButton:hover {
    background-color: #5b8457;
}
#saveLocationConfirm, #editYesButton {
    background-color: #009500;
    color: white;
}
#saveLocationConfirm:hover, #editYesButton:hover {
    background-color: #007d00;
}

#errorPopup2 {
  position: fixed;
  display: none; /* Hidden by default */
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
  width: auto;
  height: auto; /* Adjust height to fit content */
  background-color: white;
  border: 2px solid #009500;
  border-radius: 5px;
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
  z-index: 9999; /* Ensure it appears above other elements */
  padding: 10px; 
  box-sizing: border-box; 
  text-align: center; /* Center-align text and content */
}

#errorPopup2 h3 {
  margin-top: 10px; 
  white-space: nowrap;
  color: #009500;
}

#errorPopup2 p {
  margin-bottom: 20px; /* Add spacing below the paragraph */
}

#errorPopup2 button {
  background-color: #009500;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 3px;
  cursor: pointer;
}

#errorPopup2 button:hover {
  background-color: #007a00; /* Darker green on hover */
}

</style>
<link rel="stylesheet" href="https://order-1ib.pages.dev/i.css">     
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"> 
<link href="https://fonts.googleapis.com/css2?family=Lilita+One&amp;display=swap" rel="stylesheet">       
</head>
    <body onload="getUserLocation()">

        <div class="header">
    <a href="https://order-1ib.pages.dev" style="margin-right: 10px;">
        <h1 style="margin: 0;">Order App</h1>
    </a>    
    <div class="replaceable-text" onclick="showLocationPopup()" style="margin-right: 10px; margin-top:5px; cursor: pointer;">
    Change Location
   </div>
   <div class="icon-container" onclick="showLocationPopup()" style="cursor: pointer; margin-top:5px;">
    <i class="fa-solid fa-rotate" style="color: #009500;"></i>
   </div>
       </div>
          <!-- Welcome Screen -->
<div id="welcome" class="visible">    
        <h1>
            <span>O</span><span>r</span><span>d</span><span>e</span><span>r</span>
            <span class="space"></span>
            <span>A</span><span>p</span><span>p</span>
        </h1>
      <!--  <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/welcome_image.png?v=1737684481" alt="Welcome Image"> -->
    </div>
<script src="https://order-1ib.pages.dev/welcome.js"></script>        
                  <!--  -->
       <div id="categories" class="item-grid" style="margin-top: 60px; margin-bottom: 50px;">
<!-- xxxxxxxxxxxxxxxxxxxx -->                                                       
<div class="cardx" onclick="showItems('vegetables')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072235.webp?v=1738386080" alt="Vegetables">
        <p>Vegetables</p>
    </div>
    
<div class="cardx" onclick="showItems('fruits')">
       <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072237.webp?v=1738385978" alt="Fruits">
       <p>Fruits</p>
    </div>
    
<div class="cardx" onclick="showItems('meat')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072170.webp?v=1738385944" alt="Meat">
        <p>Meat & Chicken</p>
    </div>

<div class="cardx" onclick="showItems('cafeteria')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072168.webp?v=1738385898" alt="Cafeteria">
        <p>Cafeteria</p>
    </div>

<div class="cardx" onclick="showItems('restaurants')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072167.webp?v=1738386042" alt="Restaurants">
        <p>Restaurants</p>
    </div>

<div class="cardx" onclick="showItems('bakery')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072169.webp?v=1738385927" alt="Bakery">
        <p>Bakery & Spreads</p>
    </div>

<div class="cardx" onclick="showItems('oils')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072175.webp?v=1738385868" alt="Oils">
        <p>Oils & Season</p>
    </div>

<div class="cardx" onclick="showItems('seafood')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072243.webp?v=1738385970" alt="Seafood">
        <p>Seafood</p>
    </div>

<div class="cardx" onclick="showItems('spices')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072183.webp?v=1738386023" alt="Spices">
        <p>Spices</p>
    </div>

<div class="cardx" onclick="showItems('beverages')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072229.webp?v=1738385955" alt="Beverages">
        <p>Beverages</p>
    </div>

<div class="cardx" onclick="showItems('beauty')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072220.webp?v=1738385848" alt="Beauty">
        <p>Beauty</p>
    </div>

<div class="cardx" onclick="showItems('eggs')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072226.webp?v=1738385841" alt="Eggs">
        <p>Eggs & Dairy</p>
    </div>

<div class="cardx" onclick="showItems('ready to cook')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072181.webp?v=1738386054" alt="Ready to cook">
        <p>Ready to cook</p>
    </div>

<div class="cardx" onclick="showItems('snacks')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072182.webp?v=1738385890" alt="Snacks">
        <p>Snacks & Sweets</p>
    </div>

<div class="cardx" onclick="showItems('rice & grains')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072172.webp?v=1738385935" alt="Rice & Grains">
        <p>Rice & Grains</p>
    </div>

<div class="cardx" onclick="showItems('delicatessen')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072171.webp?v=1738386062" alt="Delicatessen">
        <p>Delicatessen</p>
    </div>

<div class="cardx" onclick="showItems('nuts')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072255.webp?v=1738386004" alt="Nuts">
        <p>Nuts</p>
    </div>

<div class="cardx" onclick="showItems('frozen')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072174.webp?v=1738386033" alt="Frozen">
        <p>Frozen & Can</p>
    </div>

<div class="cardx" onclick="showItems('tea')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072177.webp?v=1738385962" alt="Tea & coffee">
        <p>Tea & coffee</p>
    </div>

<div class="cardx" onclick="showItems('babies')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072254.webp?v=1738385879" alt="Babies">
        <p>Babies</p>
    </div>

<div class="cardx" onclick="showItems('personal')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072250.webp?v=1738385859" alt="Personal care">
        <p>Personal care</p>
</div>           
           
<div class="cardx" onclick="showItems('home')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000075595.webp?v=1739037778" alt="Home">
        <p>Home</p>
</div                                                                                       
<!-- xxxxxxxxxxxxxxxxxxxxxx -->           
       </div> 
                  <!--  -->    
    <div id="itemPopup" class="popup">        
 <div id="itemList"></div></div>                              
                   <!--  -->
<div id="locationPopup" class="popup2">  
    <div class="popup-footer">
        <span></span>
        <button onclick="closePopup()">
            <i class="fas fa-times"></i>
        </button>
    </div>      
    <div id="locationsList" class="popup-content"></div></div>
                   <!--  -->
<div id="cityPopup" class="popup2">  
    <div class="popup-footer">
        <button class="back-btn" onclick="goBackToLocations()">
       <i class="fas fa-arrow-left"></i> 
        </button>
        <button onclick="closePopup()">
       <i class="fas fa-times"></i>
        </button>
    </div>     
    <div id="cityList" class="popup-content"></div></div>
                   <!--  -->    
    <div id="errorPopup" class="popup2">
        <h3>Item Not Available</h3>
        <p>The selected item is not available nearby.</p>
        <br><br>
   <button onclick="closeErrorPopup()">OK</button>
    </div>
                   <!--  -->
    <div id="locationErrorPopup" class="popup2">
        <br>
        <h3>Error</h3>
        <p>Unable to get your current location. Please turn <b>ON</b> the location</p>
        <br><br>
    <button onclick="closePopup()">OK</button>
    </div>
                   <!--  -->
   <div id="locationPromptPopup" class="bottom-popup">
        <p>Please turn on your location services for a better experience.</p></div>
                   <!--  -->
     <div id="selectLocationPopup" class="bottom-popup" style="display: none;">
    <p>Please turn your location <b>ON</b><br><br>OR<br><br>if <b>ON</b> REFRESH the page</p>
</div>                   
           <!-- Edit Popup -->
<div id="editPopup">
    <h3>Change Saved Location?</h3>
    <div class="input-container">
        <input type="text" id="editNameInput" placeholder="Enter new name" maxlength="14">
    </div>
    <div class="popup-buttons">
        <button id="editNoButton" onclick="handleEditNo()">No</button>
        <button id="editYesButton" onclick="handleEditYes()">Yes</button>
    </div>
</div>
          <!-- customNamePopup  -->
<div id="saveLocationPopup">
    <h3>Your Favourite Location</h3>
    <div class="input-container">
        <input type="text" id="saveLocationInput" placeholder="Home / Office" maxlength="14">
    </div>
    <div class="popup-buttons">
        <button id="cancelButton" onclick="closeSaveLocationPopup()">Cancel</button>
        <button id="saveLocationConfirm">Save</button>
    </div>
</div>    
         <!--  -->
<div id="errorPopup2" class="popup2">
    <h3>Location Not Available</h3>
    <p>Please turn <b>ON</b> your Location in device's settings.</p>
    <br><br>
    <button onclick="closeErrorPopup()">OK</button>
</div>         
<!-- ///////////////////////// -->
<script src="https://order-1ib.pages.dev/categories.js"></script>
<script src="https://order-1ib.pages.dev/coordinates.js"></script>
<script src="https://order-1ib.pages.dev/page.js"></script>
<script src="https://order-1ib.pages.dev/pagejs2.js"></script>
<script src="https://order-1ib.pages.dev/p.js"></script>
<script>
    //when the back button is pressed
window.addEventListener('popstate', function (e) {
    const popup = document.getElementById("itemPopup");

    // Check if the popup is open
    if (popup.style.display === "block") {
        // Close the popup
        popup.style.display = "none";
        
        // Prevent the default behavior of going back
        history.pushState(null, null, location.href);
    }
});

// Function to open the popup and update the browser history state
function showItems(category) {
    fetch(categoryUrls[category])
        .then(response => {
            if (!response.ok) throw new Error('Network response was not ok');
            return response.text();
        })
        .then(data => {
            let parser = new DOMParser();
            let doc = parser.parseFromString(data, "text/html");
            let items = [];

            doc.querySelectorAll(".item-card").forEach(card => {
                let img = card.querySelector("img")?.src;
                let name = card.querySelector("p")?.textContent;
                if (img && name) items.push({ name, image: img });
            });

            let itemList = `<div class="item-grid">`;
            items.forEach(item => {
                itemList += `
                    <div class="item-card" onclick="searchItem('${item.name}')">
                        <img src="${item.image}" alt="${item.name}" loading="lazy">
                        <p>${item.name}</p>
                    </div>
                `;
            });
            itemList += `</div>`;
            document.getElementById("itemList").innerHTML = itemList;
            document.getElementById("itemPopup").style.display = "block";

            // Push state to the history to avoid going back to previous page
            history.pushState(null, null, location.href);
        })
        .catch(error => {
            console.error("Error loading items:", error);
            document.getElementById("errorPopup").style.display = "block";
        });
}
</script>
<!-- ///////////////////////// -->    
         <!-- FOOTER -->
<footer class="footer">  
    <a href="https://order-app-ae.myshopify.com/cart" class="footer-btn">
        <i class="fas fa-shopping-cart"></i>
    </a>
    <button class="footer-btn home-btn">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000074587.webp?v=1738560869" alt="Home" style="width: 80px; height: auto; margin-bottom: 0px; margin-left: -7px;">
    </button>            
    <a href="https://shopify.com/66437513414/account" class="footer-btn">
        <i class="fas fa-user"></i>
    </a>
</footer>
<script>
    function saveDeviceLocation() {
    if (navigator.geolocation) {
        showLoadingAnimation(); // Show loading animation

        navigator.geolocation.getCurrentPosition(
            (position) => {
                setTimeout(() => {
                    hideLoadingAnimation(); // Hide loading animation
                    closeLocationPopup(); // Close locationPopup
                    openSaveLocationPopup(); // Open saveLocationPopup

                    document.getElementById("saveLocationConfirm").onclick = function () {
                        const customName = document.getElementById("saveLocationInput").value.trim();
                        if (customName) {
                            const savedLocation = {
                                name: customName,
                                lat: position.coords.latitude,
                                lng: position.coords.longitude,
                                type: "saved"
                            };
                            localStorage.setItem("savedLocation", JSON.stringify(savedLocation));
                            updateReplaceableText(savedLocation);
                            closeSaveLocationPopup();
                            setTimeout(() => location.reload(), 500);
                        } else {
                            alert("Please enter a name for this location.");
                        }
                    };
                }, 1000); // Delay to ensure UI updates smoothly
            },
            (error) => {
                hideLoadingAnimation(); 
                showLocationError(error); // Ensure this function is defined
            }
        );
    } else {
        showGeolocationErrorPopup();
    }
}

function useCurrentLocation() {
    if (navigator.geolocation) {
        showLoadingAnimation(); // Show loading indicator

        navigator.geolocation.getCurrentPosition(
            (position) => {
                hideLoadingAnimation(); // Hide loading indicator
                
                let userLocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude,
                    timestamp: Date.now(),
                    type: "device"
                };
                saveLocation(userLocation);
                updateReplaceableText(userLocation);
                closePopup(); // Ensure this function is defined
            },
            (error) => {
                hideLoadingAnimation(); // Hide loading on error
                showLocationError(error); // Ensure this function is defined
            }
        );
    } else {
        showGeolocationErrorPopup();
    }
}

// Functions to control loading animation
function showLoadingAnimation() {
    if (!document.getElementById("location-loader")) {
        let loader = document.createElement("div");
        loader.id = "location-loader";
        loader.innerHTML = "Fetching location...";
        loader.style.position = "fixed";
        loader.style.top = "50%";
        loader.style.left = "50%";
        loader.style.transform = "translate(-50%, -50%)";
        loader.style.padding = "10px 20px";
        loader.style.background = "rgba(0, 0, 0, 0.7)";
        loader.style.color = "#fff";
        loader.style.borderRadius = "5px";
        loader.style.zIndex = "9999";
        document.body.appendChild(loader);
    }
}

function hideLoadingAnimation() {
    let loader = document.getElementById("location-loader");
    if (loader) {
        loader.remove();
    }
}

// Ensure these functions are defined in your code
function closeLocationPopup() {
    // Implementation to close the location popup
}

function openSaveLocationPopup() {
    const saveLocationPopup = document.getElementById("saveLocationPopup");
    if (saveLocationPopup) saveLocationPopup.style.display = "block";
}

function closeSaveLocationPopup() {
    const saveLocationPopup = document.getElementById("saveLocationPopup");
    if (saveLocationPopup) saveLocationPopup.style.display = "none";
}

function showLocationError(error) {
    console.error("Location error:", error);
    alert("Unable to retrieve your location. Please ensure location services are enabled.");
}

function showGeolocationErrorPopup() {
    const errorPopup2 = document.getElementById("errorPopup2");
    if (errorPopup2) errorPopup2.style.display = 'block';
}

function closeGeolocationErrorPopup() {
    const errorPopup2 = document.getElementById("errorPopup2");
    if (errorPopup2) errorPopup2.style.display = 'none';
}

function updateReplaceableText(location) {
    // Implementation to update the UI with the new location
}

function saveLocation(location) {
    // Implementation to save the location
}

function closePopup() {
    // Implementation to close the popup
}
</script>
function saveDeviceLocation() {
    if (navigator.geolocation) {
        showLoadingAnimation(); // Show loading animation

        navigator.geolocation.getCurrentPosition(
            (position) => {
                setTimeout(() => {
                    hideLoadingAnimation(); // Hide loading animation
                    closeLocationPopup(); // Close locationPopup
                    openSaveLocationPopup(); // Open saveLocationPopup

                    document.getElementById("saveLocationConfirm").onclick = function () {
                        const customName = document.getElementById("saveLocationInput").value.trim();
                        if (customName) {
                            const savedLocation = {
                                name: customName,
                                lat: position.coords.latitude,
                                lng: position.coords.longitude,
                                type: "saved"
                            };
                            localStorage.setItem("savedLocation", JSON.stringify(savedLocation));
                            updateReplaceableText(savedLocation);
                            closeSaveLocationPopup();
                            setTimeout(() => location.reload(), 500);
                        } else {
                            alert("Please enter a name for this location.");
                        }
                    };
                }, 1000); // Delay to ensure UI updates smoothly
            },
            (error) => {
                hideLoadingAnimation(); 
                showLocationError(error);
            }
        );
    } else {
    showGeolocationErrorPopup();
    }
   }

function openSaveLocationPopup() {
    const saveLocationPopup = document.getElementById("saveLocationPopup");
    if (saveLocationPopup) saveLocationPopup.style.display = "block";
}

function closeSaveLocationPopup() {
    const saveLocationPopup = document.getElementById("saveLocationPopup");
    if (saveLocationPopup) saveLocationPopup.style.display = "none";
}


function showGeolocationErrorPopup() {
    errorPopup2.style.display = 'block';
}

function closeGeolocationErrorPopup() {
    errorPopup2.style.display = 'none';
}

//xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    function useCurrentLocation() {
    if (navigator.geolocation) {
        showLoadingAnimation(); // Show loading indicator

        navigator.geolocation.getCurrentPosition(
            (position) => {
                hideLoadingAnimation(); // Hide loading indicator
                
                let userLocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude,
                    timestamp: Date.now(),
                    type: "device"
                };
                saveLocation(userLocation);
                updateReplaceableText(userLocation);
                closePopup();
            },
            () => {
                hideLoadingAnimation(); // Hide loading on error
                showLocationError();
            }
        );
    } else {
    showGeolocationErrorPopup();
    }
   }

// Functions to control loading animation
function showLoadingAnimation() {
    let loader = document.createElement("div");
    loader.id = "location-loader";
    loader.innerHTML = "Fetching location...";
    loader.style.position = "fixed";
    loader.style.top = "50%";
    loader.style.left = "50%";
    loader.style.transform = "translate(-50%, -50%)";
    loader.style.padding = "10px 20px";
    loader.style.background = "rgba(0, 0, 0, 0.7)";
    loader.style.color = "#fff";
    loader.style.borderRadius = "5px";
    loader.style.zIndex = "9999";
    document.body.appendChild(loader);
}

function hideLoadingAnimation() {
    let loader = document.getElementById("location-loader");
    if (loader) {
        loader.remove();
    }
}
